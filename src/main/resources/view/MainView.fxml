<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.image.ImageView?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.web.WebView?>
<?import javafx.scene.control.ComboBox?>
<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="at.newsfx.fhtechnikum.newsfx.controller.MainController"
            styleClass="root">

    <!-- Sidebar -->
    <left>
        <VBox spacing="3" styleClass="sidebar">
            <padding>
                <Insets top="16" right="12" bottom="16" left="12"/>
            </padding>

            <Label fx:id="titleLabel" text="News Tool" styleClass="headline"/>

            <Button text="External News"
                    onAction="#showExternal"
                    maxWidth="Infinity"
                    styleClass="nav-button"/>

            <Button text="Internal News"
                    onAction="#showInternal"
                    maxWidth="Infinity"
                    styleClass="nav-button"/>
        </VBox>
    </left>

    <!-- Main Content -->
    <center>
        <StackPane styleClass="content-area">

            <!-- External News View -->
            <VBox fx:id="externalView" spacing="10" styleClass="tab-content">
                <Label text="External News (API)" styleClass="headline"/>

                <StackPane fx:id="externalStack" VBox.vgrow="ALWAYS">

                    <!-- PAGE 1: LISTE + FILTER -->
                    <VBox fx:id="externalListPage" spacing="10">
                        <HBox spacing="10" styleClass="filter-bar">
                            <TextField fx:id="externalSearchField"
                                       promptText="Suche im Titel..."
                                       HBox.hgrow="ALWAYS"/>
                            <ComboBox fx:id="externalCategoryBox" prefWidth="160"/>
                        </HBox>

                        <ListView fx:id="externalNewsList" VBox.vgrow="ALWAYS"/>
                    </VBox>

                    <!-- PAGE 2: ARTIKEL-DETAIL (WebView) -->
                    <BorderPane fx:id="externalArticlePage" visible="false" managed="false">
                        <top>
                            <HBox spacing="10" styleClass="article-topbar">
                                <Button text="← Zurück" onAction="#backToExternalList" />
                                <Label fx:id="articleTitleLabel" text="Artikel" styleClass="headline"/>
                            </HBox>
                        </top>
                        <center>
                            <WebView fx:id="articleWebView"/>
                        </center>
                    </BorderPane>

                </StackPane>
            </VBox>

            <!-- Internal News View -->
            <BorderPane fx:id="internalView"
                        prefWidth="800"
                        visible="false"
                        styleClass="tab-content">

                <!-- Top -->
                <top>
                    <HBox alignment="CENTER_RIGHT" spacing="10">
                        <Button text="News Erstellen"
                                fx:id="createInternalNewsButton"
                                onAction="#onCreateInternalNews"/>
                    </HBox>
                </top>

                <!-- Center -->
                <center>
                    <VBox spacing="20">

                        <!-- Form -->
                        <VBox fx:id="internalNewsForm"
                              spacing="10"
                              maxWidth="600">

                            <Label text="Create Internal News"
                                   styleClass="headline"/>

                            <TextField fx:id="titleField"
                                       promptText="Title"/>

                            <TextArea fx:id="contentArea"
                                      promptText="News content"
                                      wrapText="true"
                                      prefRowCount="8"/>

                            <TextField fx:id="linkField"
                                       promptText="Optional link (https://...)"/>

                            <Button text="Choose Image"
                                    onAction="#onChooseImage"/>

                            <ImageView fx:id="previewImage"
                                       fitWidth="300"
                                       fitHeight="180"
                                       preserveRatio="true"
                                       visible="false"/>

                            <Button text="Attach PDF"
                                    onAction="#onChoosePdf"/>

                            <Label fx:id="pdfLabel"
                                   text="No PDF selected"/>
                        </VBox>

                        <!-- Internal News List -->
                        <ListView fx:id="internalNewsList" VBox.vgrow="ALWAYS"/>
                    </VBox>
                </center>

                <!-- Bottom -->
                <bottom>
                    <HBox spacing="10" alignment="CENTER_RIGHT">
                        <Button text="Save"
                                onAction="#onSaveInternalNews"/>
                        <Button text="Cancel"
                                onAction="#onCancelInternalNews"/>
                    </HBox>
                </bottom>

            </BorderPane>

        </StackPane>
    </center>
</BorderPane>